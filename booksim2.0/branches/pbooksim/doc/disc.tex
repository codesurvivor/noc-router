

\subsection{Static Network Partition}
The current implementation divides the network into equal partitions among the threads and seeks to minimize computation. This organization works well when the traffic pattern is balanced across the partitions. However, hotspot traffic patterns which concentrate the packets into a particular section of the network will cause imbalances in the amount of work handled by each thread. Even with the shared channel semaphore and the removal of the cycle barrier, the lightly loaded threads will  always be stalled waiting for the hotspot threads. Fortunately, common network traffic patterns are balanced and network routing algorithm are usually designed to reduce hotspots and bottlenecks in the network. Nevertheless, it is not a guarantee that an equally partitioned network will give equal work to all threads. Therefore, future improvements for the simulator should include dynamic partitioning of the network among the threads. This can be implemented by changing the current loop based iteration of network components into a work queue based organization. A work queue can be created for each network partition and each queue entry record the network component to be operated on and the network cycle associated with the operation. After operating on a component, the component is reinserted into the queue and the associated cycle is incremented. Under this organization, threads that have stalled ahead can pull work from other threads' work queues and help to finish the work in other network time slices.  

\subsection{Programming Model}
Given the underwhelming speedup that we obtained through parallelization and the possibility of excessive false sharing in the program, this has lead us to think that PThreads is not the most appropriate programming model for this simulator. As we have stated through out the report, the only points of sharing between threads are the channels that bridge routers running under different threads. No other source of true sharing should exist in the simulator. But with the shared memory model of PThreads, false sharing due to the organization of data structure can easily occur. Since we know the exact points of data sharing and since the smart partitioning of the networks should keep the amount of inter-thread communication small, perhaps message passing programming models such as MPI could offer more scalability for the parallel simulator. Shared channel objects can be written on top of MPI's send and receive interfaces, and many packets can be bundled together to reduce messaging overhead. 
